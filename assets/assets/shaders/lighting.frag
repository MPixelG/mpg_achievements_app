{
  "sksl": {
    "entrypoint": "lighting_fragment_main",
    "shader": "// This SkSL shader is autogenerated by spirv-cross.\n\nfloat4 flutter_FragCoord;\n\nuniform vec2 mapSize;\nuniform vec2 entityMapSize;\nuniform vec2 entityMapOffset;\nuniform vec3 lightPos;\nuniform float heightScale;\nuniform float time;\nuniform shader albedoMap;\nuniform half2 albedoMap_size;\nuniform shader depthMap;\nuniform half2 depthMap_size;\nuniform shader albedoMapEntity;\nuniform half2 albedoMapEntity_size;\nuniform shader depthMapEntity;\nuniform half2 depthMapEntity_size;\n\nvec4 fragColor;\n\nfloat dx;\nfloat dy;\nfloat dxEntity;\nfloat dyEntity;\n\nvec2 FLT_flutter_local_FlutterFragCoord()\n{\n    return flutter_FragCoord.xy;\n}\n\nfloat FLT_flutter_local_heightInDirection(vec2 uv, vec2 uvEntity, vec2 dir)\n{\n    float h = depthMap.eval(depthMap_size * ( uv)).z;\n    float hEntity = depthMapEntity.eval(depthMapEntity_size * ( uvEntity)).z;\n    if (hEntity > h)\n    {\n        return depthMapEntity.eval(depthMapEntity_size * ( uvEntity + (dir * vec2(dxEntity, dyEntity)))).z;\n    }\n    return depthMap.eval(depthMap_size * ( uv + (dir * vec2(dx, dy)))).z;\n}\n\nvoid FLT_main()\n{\n    dx = (1.0 / mapSize.x) * 1.0;\n    dy = (1.0 / mapSize.y) * 1.0;\n    dxEntity = (1.0 / entityMapSize.x) * 1.0;\n    dyEntity = (1.0 / entityMapSize.y) * 1.0;\n    vec2 uv_1 = FLT_flutter_local_FlutterFragCoord() / mapSize;\n    vec2 uvEntity_1 = (FLT_flutter_local_FlutterFragCoord() + entityMapOffset) / entityMapSize;\n    vec4 albedoPixel = albedoMap.eval(albedoMap_size * ( uv_1));\n    vec4 albedoPixelEntity = albedoMapEntity.eval(albedoMapEntity_size * ( uvEntity_1));\n    vec4 normalPixel = depthMap.eval(depthMap_size * ( uv_1));\n    vec4 normalPixelEntity = depthMapEntity.eval(depthMapEntity_size * ( uvEntity_1));\n    float pixelHeight = normalPixel.z;\n    float pixelHeightEntity = normalPixelEntity.z;\n    if (pixelHeightEntity > pixelHeight)\n    {\n        albedoPixel = albedoPixelEntity + (albedoPixel * (albedoPixel.w - albedoPixelEntity.w));\n        normalPixel = normalPixelEntity + (normalPixel * (normalPixel.w - normalPixelEntity.w));\n        pixelHeight = pixelHeightEntity + ((albedoPixel.w - albedoPixelEntity.w) * pixelHeight);\n    }\n    else\n    {\n        albedoPixel += (albedoPixelEntity * 0.20000000298023223876953125);\n    }\n    vec2 param = uv_1;\n    vec2 param_1 = uvEntity_1;\n    vec2 param_2 = vec2(-1.0, 0.0);\n    float Hleft = FLT_flutter_local_heightInDirection(param, param_1, param_2);\n    vec2 param_3 = uv_1;\n    vec2 param_4 = uvEntity_1;\n    vec2 param_5 = vec2(1.0, 0.0);\n    float Hright = FLT_flutter_local_heightInDirection(param_3, param_4, param_5);\n    vec2 param_6 = uv_1;\n    vec2 param_7 = uvEntity_1;\n    vec2 param_8 = vec2(0.0, -1.0);\n    float Hdown = FLT_flutter_local_heightInDirection(param_6, param_7, param_8);\n    vec2 param_9 = uv_1;\n    vec2 param_10 = uvEntity_1;\n    vec2 param_11 = vec2(0.0, 1.0);\n    float Hup = FLT_flutter_local_heightInDirection(param_9, param_10, param_11);\n    float dHx = Hright - Hleft;\n    float dHy = Hup - Hdown;\n    float normalStrength = 0.0599999986588954925537109375;\n    vec3 normal = normalize(vec3(-dHx, -dHy, normalStrength));\n    vec3 _235 = (normal * 0.5) + vec3(0.5);\n    normalPixel.x = _235.x;\n    normalPixel.y = _235.y;\n    normalPixel.z = _235.z;\n    vec3 fragPos = vec3(uv_1, pixelHeight);\n    vec3 L = lightPos - fragPos;\n    float dist = length(L);\n    L = normalize(L);\n    float NdotL = max(dot(normalPixel.xyz, L), 0.0);\n    float range = 2.2000000476837158203125;\n    float att = 1.0 / (1.0 + ((16.0 * (dist / range)) * (dist / range)));\n    vec3 lightColor = vec3(1.0, 0.699999988079071044921875, 0.75);\n    vec3 diffuse = (lightColor * NdotL) * ((pixelHeight / 5.0) + 0.75);\n    vec3 color = albedoPixel.xyz * (vec3(0.2199999988079071044921875, 0.20000000298023223876953125, 0.20000000298023223876953125) + diffuse);\n    fragColor = vec4(color, albedoPixel.w);\n}\n\nhalf4 main(float2 iFragCoord)\n{\n      flutter_FragCoord = float4(iFragCoord, 0, 0);\n      FLT_main();\n      return fragColor;\n}\n",
    "stage": 1,
    "uniforms": [
      {
        "array_elements": 0,
        "bit_width": 0,
        "columns": 1,
        "location": 0,
        "name": "albedoMap",
        "rows": 1,
        "type": 12
      },
      {
        "array_elements": 0,
        "bit_width": 0,
        "columns": 1,
        "location": 1,
        "name": "depthMap",
        "rows": 1,
        "type": 12
      },
      {
        "array_elements": 0,
        "bit_width": 0,
        "columns": 1,
        "location": 2,
        "name": "albedoMapEntity",
        "rows": 1,
        "type": 12
      },
      {
        "array_elements": 0,
        "bit_width": 0,
        "columns": 1,
        "location": 3,
        "name": "depthMapEntity",
        "rows": 1,
        "type": 12
      },
      {
        "array_elements": 0,
        "bit_width": 32,
        "columns": 1,
        "location": 4,
        "name": "mapSize",
        "rows": 2,
        "type": 10
      },
      {
        "array_elements": 0,
        "bit_width": 32,
        "columns": 1,
        "location": 5,
        "name": "entityMapSize",
        "rows": 2,
        "type": 10
      },
      {
        "array_elements": 0,
        "bit_width": 32,
        "columns": 1,
        "location": 6,
        "name": "entityMapOffset",
        "rows": 2,
        "type": 10
      },
      {
        "array_elements": 0,
        "bit_width": 32,
        "columns": 1,
        "location": 7,
        "name": "lightPos",
        "rows": 3,
        "type": 10
      },
      {
        "array_elements": 0,
        "bit_width": 32,
        "columns": 1,
        "location": 8,
        "name": "heightScale",
        "rows": 1,
        "type": 10
      },
      {
        "array_elements": 0,
        "bit_width": 32,
        "columns": 1,
        "location": 9,
        "name": "time",
        "rows": 1,
        "type": 10
      }
    ]
  }
}